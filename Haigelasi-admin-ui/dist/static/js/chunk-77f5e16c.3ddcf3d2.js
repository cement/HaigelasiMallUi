(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77f5e16c","chunk-593eea03","chunk-2d0cfe82","chunk-2d226008","chunk-2d2371fe"],{4381:function(t,e,n){"use strict";n.r(e);var i=n("e799"),r=function(t){t.directive("permission",i["default"])};window.Vue&&(window["permission"]=i["default"],Vue.use(r)),i["default"].install=r,e["default"]=i["default"]},"665a":function(t,e,n){"use strict";n.r(e),n.d(e,"getList",(function(){return r})),n.d(e,"getCategories",(function(){return s})),n.d(e,"getBanners",(function(){return o})),n.d(e,"save",(function(){return a})),n.d(e,"remove",(function(){return c})),n.d(e,"removeBanner",(function(){return u})),n.d(e,"setCategoryBanner",(function(){return f}));var i=n("b775");function r(t){return Object(i["default"])({url:"/shop/category/list",method:"get",params:t})}function s(){return Object(i["default"])({url:"/shop/category/getAll",method:"get"})}function o(t){return Object(i["default"])({url:"/shop/category/getBanners/"+t,method:"get"})}function a(t){return Object(i["default"])({url:"/shop/category",method:"post",params:t})}function c(t){return Object(i["default"])({url:"/shop/category",method:"delete",params:{id:t}})}function u(t,e){return Object(i["default"])({url:"/shop/category/removeBanner/"+t+"/"+e,method:"delete"})}function f(t,e){return Object(i["default"])({url:"/shop/category/setBanner/"+t+"/"+e,method:"post"})}},afd5:function(t,e,n){"use strict";n.r(e);n("7f7f");var i=n("665a"),r=n("fa7d"),s=n("4381");e["default"]={directives:{permission:s["default"]},data:function(){return{formVisible:!1,formTitle:"添加商品类别",isAdd:!0,form:{name:"",url:"",icon:"",id:""},listQuery:{page:1,limit:20,id:void 0},total:0,list:null,listLoading:!0,selRow:{},apiUrl:Object(r["getApiUrl"])(),banner:{idCategory:"",activeName:"first",visible:!1,list:[]}}},filters:{statusFilter:function(t){var e={published:"success",draft:"gray",deleted:"danger"};return e[t]}},created:function(){this.init()},methods:{init:function(){this.fetchData()},fetchData:function(){var t=this;this.listLoading=!0,Object(i["getList"])(this.listQuery).then((function(e){t.list=e.data.records,t.listLoading=!1,t.total=e.data.total}))},search:function(){this.fetchData()},reset:function(){this.listQuery.id="",this.fetchData()},handleFilter:function(){this.listQuery.page=1,this.getList()},handleClose:function(){},fetchNext:function(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev:function(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage:function(t){this.listQuery.page=t,this.fetchData()},changeSize:function(t){this.listQuery.limit=t,this.fetchData()},handleCurrentChange:function(t,e){this.selRow=t},resetForm:function(){this.form={name:"",url:"",icon:"",id:""}},add:function(){this.resetForm(),this.formTitle="添加商品类别",this.formVisible=!0,this.isAdd=!0},save:function(){var t=this;this.$refs["form"].validate((function(e){if(!e)return!1;Object(i["save"])({name:t.form.name,url:t.form.url,icon:t.form.icon,id:t.form.id}).then((function(e){t.$message({message:t.$t("common.optionSuccess"),type:"success"}),t.fetchData(),t.formVisible=!1}))}))},checkSel:function(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:this.$t("common.mustSelectOne"),type:"warning"}),!1)},edit:function(){this.checkSel()&&(this.isAdd=!1,this.form=this.selRow,this.formTitle="编辑商品类别",this.formVisible=!0)},remove:function(){var t=this;if(this.checkSel()){var e=this.selRow.id;this.$confirm(this.$t("common.deleteConfirm"),this.$t("common.tooltip"),{confirmButtonText:this.$t("button.submit"),cancelButtonText:this.$t("button.cancel"),type:"warning"}).then((function(){Object(i["remove"])(e).then((function(e){t.$message({message:t.$t("common.optionSuccess"),type:"success"}),t.fetchData()})).catch((function(t){}))})).catch((function(){}))}},bannerMgr:function(t){var e=this;this.banner.visible=!0,this.banner.idCategory=t,Object(i["getBanners"])(t).then((function(t){e.banner.list=t.data,console.log("banner",e.banner)}))},bannerRemove:function(t){var e=this;console.log("item",t),Object(i["removeBanner"])(this.banner.idCategory,t).then((function(t){e.$message({message:e.$t("common.optionSuccess"),type:"success"}),e.bannerMgr(e.banner.idCategory)}))},bannerEdit:function(){},addBanner:function(){this.$router.push({path:"banner",query:{idCategory:this.banner.idCategory}})}}}},e799:function(t,e,n){"use strict";n.r(e);n("6762"),n("2fdb");var i=n("4360");e["default"]={inserted:function(t,e,n){var r=e.value,s=i["default"].getters&&i["default"].getters.permissions;if(!(r&&r instanceof Array&&r.length>0))throw new Error("need roles! Like v-permission=\"['admin','editor']\"");var o=r,a=s.some((function(t){return o.includes(t)}));a||t.parentNode&&t.parentNode.removeChild(t)}}},fa7d:function(t,e,n){"use strict";n.r(e),n.d(e,"getApiUrl",(function(){return r}));var i="/api/admin/";function r(){return i}}}]);
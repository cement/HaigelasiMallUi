(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aaabb282","chunk-593eea03","chunk-2d0b30ad","chunk-2d226008","chunk-2d2371fe"],{"274f":function(e,t,n){"use strict";n.r(t);var s=n("b775");t["default"]={getList:function(e){return Object(s["default"])({url:"/shop/goods/list",method:"get",params:e})},saveBaseInfo:function(e){return Object(s["default"])({url:"/shop/goods/saveBaseInfo",method:"post",data:e})},save:function(e){return Object(s["default"])({url:"/shop/goods",method:"post",data:e})},remove:function(e){return Object(s["default"])({url:"/shop/goods",method:"delete",params:{id:e}})},get:function(e){return Object(s["default"])({url:"/shop/goods",method:"get",params:{id:e}})},changeIsOnSale:function(e,t){return Object(s["default"])({url:"/shop/goods/changeIsOnSale",method:"post",params:{id:e,isOnSale:t}})}}},4381:function(e,t,n){"use strict";n.r(t);var s=n("e799"),a=function(e){e.directive("permission",s["default"])};window.Vue&&(window["permission"]=s["default"],Vue.use(a)),s["default"].install=a,t["default"]=s["default"]},"5f72":function(e,t,n){"use strict";var s=n("cab6"),a=n.n(s);a.a},ba82:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"block"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:6}},[n("el-input",{attrs:{size:"mini",placeholder:"商品名称"},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}})],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-search"},nativeOn:{click:function(t){return e.search(t)}}},[e._v(e._s(e.$t("button.search")))]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-refresh"},nativeOn:{click:function(t){return e.reset(t)}}},[e._v(e._s(e.$t("button.reset")))])],1)],1),e._v(" "),n("br"),e._v(" "),n("el-row",[n("el-col",{attrs:{span:24}},[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/goodsEdit"],expression:"['/goodsEdit']"}],attrs:{type:"success",size:"mini",icon:"el-icon-plus"},nativeOn:{click:function(t){return e.add(t)}}},[e._v(e._s(e.$t("button.add"))+"\n        ")])],1)],1)],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[n("el-table-column",{attrs:{label:"ID"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.id)+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.name)+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"小图"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("img",{staticStyle:{width:"50px"},attrs:{src:e.apiUrl+"/file/getImgStream?idFile="+t.row.pic}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"类别"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.category.name)+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"产品简介"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.descript)+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"上架"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{on:{change:function(n){return e.changeIsOnSale(t.row)}},model:{value:t.row.isOnSale,callback:function(n){e.$set(t.row,"isOnSale",n)},expression:"scope.row.isOnSale"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"是否新品推荐"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{directives:[{name:"show",rawName:"v-show",value:t.row.isNew,expression:"scope.row.isNew"}],attrs:{type:"success"}},[e._v("是")]),e._v(" "),n("el-tag",{directives:[{name:"show",rawName:"v-show",value:!t.row.isNew,expression:"!scope.row.isNew"}],attrs:{type:"warning"}},[e._v("否")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"是否人气商品"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{directives:[{name:"show",rawName:"v-show",value:t.row.isHot,expression:"scope.row.isHot"}],attrs:{type:"success"}},[e._v("是")]),e._v(" "),n("el-tag",{directives:[{name:"show",rawName:"v-show",value:!t.row.isHot,expression:"!scope.row.isHot"}],attrs:{type:"warning"}},[e._v("否")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit",circle:""},nativeOn:{click:function(n){return e.edit(t.row.id)}}})]}}])})],1),e._v(" "),n("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,50,100,500],"page-size":e.listQuery.limit,total:e.total},on:{"size-change":e.changeSize,"current-change":e.fetchPage,"prev-click":e.fetchPrev,"next-click":e.fetchNext}})],1)},a=[],i=n("274f"),r=n("fa7d"),o=n("4381"),l={directives:{permission:o["default"]},data:function(){return{listQuery:{page:1,limit:20,name:void 0},total:0,list:null,listLoading:!0,selRow:{},apiUrl:Object(r["getApiUrl"])()}},filters:{statusFilter:function(e){var t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},created:function(){this.init()},methods:{init:function(){this.fetchData()},fetchData:function(){var e=this;this.listLoading=!0,i["default"].getList(this.listQuery).then((function(t){e.list=t.data.records,e.listLoading=!1,e.total=t.data.total}))},search:function(){this.fetchData()},reset:function(){this.listQuery.name="",this.fetchData()},handleFilter:function(){this.listQuery.page=1,this.getList()},handleClose:function(){},fetchNext:function(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev:function(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage:function(e){this.listQuery.page=e,this.fetchData()},changeSize:function(e){this.listQuery.limit=e,this.fetchData()},handleCurrentChange:function(e,t){this.selRow=e},checkSel:function(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:this.$t("common.mustSelectOne"),type:"warning"}),!1)},add:function(){this.$router.push("goodsEdit")},edit:function(e){this.$router.push({path:"goodsEdit",query:{id:e}})},changeIsOnSale:function(e){var t=this;i["default"].changeIsOnSale(e.id,e.isOnSale).then((function(n){t.$message({message:e.isOnSale?"上架成功":"下架成功",type:"success"})}))}}},u=l,c=(n("5f72"),n("2877")),d=Object(c["a"])(u,s,a,!1,null,"f160a1bc",null);t["default"]=d.exports},cab6:function(e,t,n){},e799:function(e,t,n){"use strict";n.r(t);n("6762"),n("2fdb");var s=n("4360");t["default"]={inserted:function(e,t,n){var a=t.value,i=s["default"].getters&&s["default"].getters.permissions;if(!(a&&a instanceof Array&&a.length>0))throw new Error("need roles! Like v-permission=\"['admin','editor']\"");var r=a,o=i.some((function(e){return r.includes(e)}));o||e.parentNode&&e.parentNode.removeChild(e)}}},fa7d:function(e,t,n){"use strict";n.r(t),n.d(t,"getApiUrl",(function(){return a}));var s="/api/admin/";function a(){return s}}}]);
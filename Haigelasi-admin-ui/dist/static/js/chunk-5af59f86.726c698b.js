(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5af59f86","chunk-4200b347","chunk-2d0e5584","chunk-2d0cfe82","chunk-2d0b30ad","chunk-2d0ae5c4","chunk-2d0da386","chunk-2d22db58","chunk-2d2371fe"],{"0a74":function(t,e,i){"use strict";i.r(e);var r=i("b775");e["default"]={save:function(t){return Object(r["default"])({url:"/shop/goods/sku",method:"post",data:t})},remove:function(t){return Object(r["default"])({url:"/shop/goods/sku",method:"delete",params:{id:t}})}}},"26b1":function(t,e,i){},"274f":function(t,e,i){"use strict";i.r(e);var r=i("b775");e["default"]={getList:function(t){return Object(r["default"])({url:"/shop/goods/list",method:"get",params:t})},saveBaseInfo:function(t){return Object(r["default"])({url:"/shop/goods/saveBaseInfo",method:"post",data:t})},save:function(t){return Object(r["default"])({url:"/shop/goods",method:"post",data:t})},remove:function(t){return Object(r["default"])({url:"/shop/goods",method:"delete",params:{id:t}})},get:function(t){return Object(r["default"])({url:"/shop/goods",method:"get",params:{id:t}})},changeIsOnSale:function(t,e){return Object(r["default"])({url:"/shop/goods/changeIsOnSale",method:"post",params:{id:t,isOnSale:e}})}}},"28a5":function(t,e,i){"use strict";var r=i("aae3"),n=i("cb7c"),s=i("ebd6"),a=i("0390"),o=i("9def"),c=i("5f1b"),l=i("520a"),u=i("79e5"),d=Math.min,h=[].push,f="split",g="length",m="lastIndex",p=4294967295,b=!u((function(){RegExp(p,"y")}));i("214f")("split",2,(function(t,e,i,u){var y;return y="c"=="abbc"[f](/(b)*/)[1]||4!="test"[f](/(?:)/,-1)[g]||2!="ab"[f](/(?:ab)*/)[g]||4!="."[f](/(.?)(.?)/)[g]||"."[f](/()()/)[g]>1||""[f](/.?/)[g]?function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!r(t))return i.call(n,t,e);var s,a,o,c=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,f=void 0===e?p:e>>>0,b=new RegExp(t.source,u+"g");while(s=l.call(b,n)){if(a=b[m],a>d&&(c.push(n.slice(d,s.index)),s[g]>1&&s.index<n[g]&&h.apply(c,s.slice(1)),o=s[0][g],d=a,c[g]>=f))break;b[m]===s.index&&b[m]++}return d===n[g]?!o&&b.test("")||c.push(""):c.push(n.slice(d)),c[g]>f?c.slice(0,f):c}:"0"[f](void 0,0)[g]?function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)}:i,[function(i,r){var n=t(this),s=void 0==i?void 0:i[e];return void 0!==s?s.call(i,n,r):y.call(String(n),i,r)},function(t,e){var r=u(y,t,this,e,y!==i);if(r.done)return r.value;var l=n(t),h=String(this),f=s(l,RegExp),g=l.unicode,m=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(b?"y":"g"),v=new f(b?l:"^(?:"+l.source+")",m),k=void 0===e?p:e>>>0;if(0===k)return[];if(0===h.length)return null===c(v,h)?[h]:[];var w=0,O=0,_=[];while(O<h.length){v.lastIndex=b?O:0;var L,S=c(v,b?h:h.slice(O));if(null===S||(L=d(o(v.lastIndex+(b?0:O)),h.length))===w)O=a(h,O,g);else{if(_.push(h.slice(w,O)),_.length===k)return _;for(var j=1;j<=S.length-1;j++)if(_.push(S[j]),_.length===k)return _;O=w=L}}return _.push(h.slice(w)),_}]}))},"456d":function(t,e,i){var r=i("4bf8"),n=i("0d58");i("5eda")("keys",(function(){return function(t){return n(r(t))}}))},"5dbc":function(t,e,i){var r=i("d3f4"),n=i("8b97").set;t.exports=function(t,e,i){var s,a=e.constructor;return a!==i&&"function"==typeof a&&(s=a.prototype)!==i.prototype&&r(s)&&n&&n(t,s),t}},"5eda":function(t,e,i){var r=i("5ca1"),n=i("8378"),s=i("79e5");t.exports=function(t,e){var i=(n.Object||{})[t]||Object[t],a={};a[t]=e(i),r(r.S+r.F*s((function(){i(1)})),"Object",a)}},"665a":function(t,e,i){"use strict";i.r(e),i.d(e,"getList",(function(){return n})),i.d(e,"getCategories",(function(){return s})),i.d(e,"getBanners",(function(){return a})),i.d(e,"save",(function(){return o})),i.d(e,"remove",(function(){return c})),i.d(e,"removeBanner",(function(){return l})),i.d(e,"setCategoryBanner",(function(){return u}));var r=i("b775");function n(t){return Object(r["default"])({url:"/shop/category/list",method:"get",params:t})}function s(){return Object(r["default"])({url:"/shop/category/getAll",method:"get"})}function a(t){return Object(r["default"])({url:"/shop/category/getBanners/"+t,method:"get"})}function o(t){return Object(r["default"])({url:"/shop/category",method:"post",params:t})}function c(t){return Object(r["default"])({url:"/shop/category",method:"delete",params:{id:t}})}function l(t,e){return Object(r["default"])({url:"/shop/category/removeBanner/"+t+"/"+e,method:"delete"})}function u(t,e){return Object(r["default"])({url:"/shop/category/setBanner/"+t+"/"+e,method:"post"})}},"6b59":function(t,e,i){"use strict";i.r(e);var r=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"];e["default"]=r},8256:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-container"},[i("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("上传图片\n  ")]),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":t.fileList,"show-file-list":!0,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload,headers:t.uploadHeaders,action:t.fileUrl,"list-type":"picture-card"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1),t._v(" "),i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("确 定")])],1)],1)},n=[],s=(i("ac6a"),i("456d"),i("fa7d")),a=i("5f87"),o={name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[],fileUrl:"",uploadHeaders:{Authorization:""}}},created:function(){this.fileUrl=Object(s["getApiUrl"])()+"/file",this.uploadHeaders["Authorization"]=Object(a["getToken"])()},methods:{checkAllSuccess:function(){var t=this;return Object.keys(this.listObj).every((function(e){return t.listObj[e].hasSuccess}))},handleSubmit:function(){var t=this,e=Object.keys(this.listObj).map((function(e){return t.listObj[e]}));this.checkAllSuccess()?(this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("请等待所有图片上传成功 或 出现了网络问题，请刷新页面重新上传！")},handleSuccess:function(t,e){for(var i=e.uid,r=Object.keys(this.listObj),n=0,s=r.length;n<s;n++)if(this.listObj[r[n]].uid===i)return this.listObj[r[n]].url=this.fileUrl+"/download?idFile="+t.data.id,void(this.listObj[r[n]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,i=Object.keys(this.listObj),r=0,n=i.length;r<n;r++)if(this.listObj[i[r]].uid===e)return void delete this.listObj[i[r]]},beforeUpload:function(t){var e=this,i=window.URL||window.webkitURL,r=t.uid;return this.listObj[r]={},new Promise((function(n,s){var a=new Image;a.src=i.createObjectURL(t),a.onload=function(){e.listObj[r]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},n(!0)}))}}},c=o,l=(i("fbb9"),i("2877")),u=Object(l["a"])(c,r,n,!1,null,"4d272f80",null);e["default"]=u.exports},"8b97":function(t,e,i){var r=i("d3f4"),n=i("cb7c"),s=function(t,e){if(n(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=i("9b43")(Function.call,i("11e9").f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(n){e=!0}return function(t,i){return s(t,i),e?t.__proto__=i:r(t,i),t}}({},!1):void 0),check:s}},"93a5":function(t,e,i){"use strict";i.r(e),i.d(e,"getAttrBy",(function(){return n}));var r=i("b775");function n(t){return Object(r["default"])({url:"/shop/attr/val/getAttrByCategoryAndGoods/"+t,method:"get"})}},aa77:function(t,e,i){var r=i("5ca1"),n=i("be13"),s=i("79e5"),a=i("fdef"),o="["+a+"]",c="​",l=RegExp("^"+o+o+"*"),u=RegExp(o+o+"*$"),d=function(t,e,i){var n={},o=s((function(){return!!a[t]()||c[t]()!=c})),l=n[t]=o?e(h):a[t];i&&(n[i]=l),r(r.P+r.F*o,"String",n)},h=d.trim=function(t,e){return t=String(n(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(u,"")),t};t.exports=d},c5f6:function(t,e,i){"use strict";var r=i("7726"),n=i("69a8"),s=i("2d95"),a=i("5dbc"),o=i("6a99"),c=i("79e5"),l=i("9093").f,u=i("11e9").f,d=i("86cc").f,h=i("aa77").trim,f="Number",g=r[f],m=g,p=g.prototype,b=s(i("2aeb")(p))==f,y="trim"in String.prototype,v=function(t){var e=o(t,!1);if("string"==typeof e&&e.length>2){e=y?e.trim():h(e,3);var i,r,n,s=e.charCodeAt(0);if(43===s||45===s){if(i=e.charCodeAt(2),88===i||120===i)return NaN}else if(48===s){switch(e.charCodeAt(1)){case 66:case 98:r=2,n=49;break;case 79:case 111:r=8,n=55;break;default:return+e}for(var a,c=e.slice(2),l=0,u=c.length;l<u;l++)if(a=c.charCodeAt(l),a<48||a>n)return NaN;return parseInt(c,r)}}return+e};if(!g(" 0o1")||!g("0b1")||g("+0x1")){g=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof g&&(b?c((function(){p.valueOf.call(i)})):s(i)!=f)?a(new m(v(e)),i,g):v(e)};for(var k,w=i("9e1e")?l(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),O=0;w.length>O;O++)n(m,k=w[O])&&!n(g,k)&&d(g,k,u(m,k));g.prototype=p,p.constructor=g,i("2aba")(r,f,g)}},f69f:function(t,e,i){"use strict";i.r(e);i("ac6a"),i("7f7f"),i("28a5"),i("c5f6");var r=i("8256"),n=i("6b59"),s=i("f93b"),a=i("274f"),o=i("93a5"),c=i("665a"),l=i("fa7d"),u=i("5f87"),d=i("0a74");e["default"]={components:{editorImage:r["default"]},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:Number,required:!1,default:360}},data:function(){return{spec:"one",specs:[],specDialogFormVisible:!1,skuForm:{},attrKeySel:"",attrKeyList:[],attrValList:[],showAddAttrKey:!1,attrKeyForm:{attrName:""},attrValForm:{attrVal:""},attrValSel:"",attrValListSel:[],tags:[],form:{pic:"",gallery:[],idCategory:"",isHot:!1,isNew:!1},skuList:[],uploadUrl:"",uploadFileId:"",uploadHeaders:{Authorization:""},idGoods:"",active:0,categories:[],tinymceId:"tinymceId",fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN"},galleryList:[],apiUrl:Object(l["getApiUrl"])()}},computed:{language:function(){return this.languageTypeList[this.$store.getters.language]}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){return window.tinymce.get(e.tinymceId).setContent(t||"")}))},language:function(){var t=this;this.destroyTinymce(),this.$nextTick((function(){return t.initTinymce()}))}},mounted:function(){this.init(),this.initTinymce()},activated:function(){this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){this.uploadUrl=Object(l["getApiUrl"])()+"/file",this.uploadHeaders["Authorization"]=Object(u["getToken"])(),this.idGoods=this.$route.query.id,this.fetchData()},fetchData:function(){var t=this;this.listLoading=!0,this.idGoods&&a["default"].get(this.idGoods).then((function(e){t.form=e.data.goods,t.idGoods=t.form.id,t.skuList=e.data.skuList,t.spec=t.skuList.length>0?"more":"one";for(var i=t.form.gallery.split(","),r=0;r<i.length;r++)""!=i[r]&&t.galleryList.push({id:i[r],url:t.apiUrl+"/file/getImgStream?idFile="+i[r]});t.setContent(t.form.detail),Object(o["getAttrBy"])(t.form.idCategory).then((function(e){t.attrKeyList=e.data.keyList,t.attrValList=e.data.valList}))})),Object(c["getCategories"])().then((function(e){t.categories=e.data}))},prev:function(){this.active>0&&(this.active-=1)},save:function(){var t=this;if(!this.idGoods&&0==this.active){if(""===this.form.name||""===this.form.idCategory||""===this.form.descript)return void this.$message({message:"请输入必要的商品项目",type:"error"});a["default"].saveBaseInfo({name:this.form.name,idCategory:this.form.idCategory,descript:this.form.descript,isNew:this.form.isNew,isHot:this.form.isHot}).then((function(e){t.idGoods=e.data})),Object(o["getAttrBy"])(this.form.idCategory).then((function(e){t.attrKeyList=e.data.keyList,t.attrValList=e.data.valList}))}if(this.active<3)this.active++;else{var e=this.getContent(),i=this.getGallery();"more"===this.spec&&(this.form.price="",this.form.marketingPrice="",this.form.stock=""),a["default"].save({name:this.form.name,pic:this.form.pic,gallery:i,idCategory:this.form.idCategory,descript:this.form.descript,detail:e,stock:this.form.stock,price:this.form.price,isDelete:this.form.isDelete,isOnSale:this.form.isOnSale,id:this.idGoods,isNew:this.form.isNew,isHot:this.form.isHot}).then((function(e){t.$message({message:t.$t("common.optionSuccess"),type:"success"}),t.$router.push("/goods")}))}},getGallery:function(){for(var t="",e=0;e<this.galleryList.length;e++)0==e?t=this.galleryList[e].id:t+=","+this.galleryList[e].id;return t},handleRemove:function(t,e){for(var i=0;i<this.galleryList.length;i++)this.galleryList[i].id===t.id&&this.galleryList.splice(i,1)},handleUploadPicSuccess:function(t,e){2e4===t.code?this.form.pic=t.data.realFileName:this.$message({message:this.$t("common.uploadError"),type:"error"})},handleUploadGallerySuccess:function(t,e){2e4===t.code?this.galleryList.push({id:t.data.realFileName,url:this.apiUrl+"/file/getImgStream?idFile="+t.data.realFileName}):this.$message({message:this.$t("common.uploadError"),type:"error"})},initTinymce:function(){var t=this,e=this;window.tinymce.init({value:"",language:"zh_CN",selector:"#".concat(this.tinymceId),height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:s["default"],menubar:this.menubar,plugins:n["default"],end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,convert_urls:!1,init_instance_callback:function(i){e.value&&i.setContent(e.value),e.hasInit=!0,i.on("NodeChange Change KeyUp SetContent",(function(){t.hasChange=!0;var e=i.getContent();t.form.content=e}))},setup:function(t){t.on("FullscreenStateChanged",(function(t){e.fullscreen=t.state}))}})},destroyTinymce:function(){var t=window.tinymce.get(this.tinymceId);this.fullscreen&&t.execCommand("mceFullScreen"),t&&t.destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){return window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var e=this;t.forEach((function(t){window.tinymce.get(e.tinymceId).insertContent('<img class="wscnph" src="'.concat(t.url,'" >'))}))},tableRowClassName:function(t,e){return 1===e?"info-row":3===e?"positive-row":""},changeAttrKey:function(t){for(var e=[],i=0;i<this.attrValList.length;i++)this.attrValList[i].idAttrKey===t&&e.push(this.attrValList[i]);this.attrValListSel=e,this.attrValSel=e[0].id},addAttrKeyFun:function(){this.showAddAttrKey=!this.showAddAttrKey},addToTag:function(){for(var t=0;t<this.attrValList.length;t++)if(this.attrValList[t].id===this.attrValSel){this.tags.push(this.attrValList[t]);break}},submitAttrKeyForm:function(){if(""!=this.attrKeyForm.attrName){for(var t=!1,e=0;e<this.attrKeyList.length;e++)if(this.attrKeyForm.attrName===this.attrKeyList[e].attrName){t=!0;break}if(!t){var i=this.attrKeyList.length+1;this.attrKeyList.push({id:i,attrName:this.attrKeyForm.attrName}),this.attrKeySel=i,this.addAttrKeyFun()}}},openAddSkuForm:function(){this.tags=[],this.specDialogFormVisible=!0},closeAddSkuForm:function(){this.specDialogFormVisible=!1},getSkuCode:function(){for(var t="",e="",i=0;i<this.tags.length;i++)0===i?(t=this.tags[i].id,e=this.tags[i].attrVal):(t+=","+this.tags[i].id,e+=","+this.tags[i].attrVal);return{code:t,codeName:e}},addSku:function(){var t=this;if(0!=this.tags.length){var e=this.getSkuCode();d["default"].save({idGoods:this.idGoods,marketingPrice:this.skuForm.marketingPrice,code:e.code,codeName:e.codeName,price:this.skuForm.price,stock:this.skuForm.stock}).then((function(e){for(var i=e.data,r=!1,n=0;n<t.skuList.length;n++)if(t.skuList[n].id===i.id){t.skuList.splice(n,1,i),r=!0;break}r||t.skuList.push(i),t.specDialogFormVisible=!1}))}else this.$message({message:"请选择商品规格",type:"error"})},removeSku:function(t){console.log(t);var e=this.skuList.splice(t,1),i=e[0];d["default"].remove(i.id)}}}},f93b:function(t,e,i){"use strict";i.r(e);var r=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"];e["default"]=r},fa7d:function(t,e,i){"use strict";i.r(e),i.d(e,"getApiUrl",(function(){return n}));var r="/api/admin/";function n(){return r}},fbb9:function(t,e,i){"use strict";var r=i("26b1"),n=i.n(r);n.a},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-36b07a66","chunk-593eea03","chunk-2d0c7ad7","chunk-2d0e4a60","chunk-2d0b30ad","chunk-2d226008","chunk-2d2371fe"],{"274f":function(t,e,i){"use strict";i.r(e);var s=i("b775");e["default"]={getList:function(t){return Object(s["default"])({url:"/shop/goods/list",method:"get",params:t})},saveBaseInfo:function(t){return Object(s["default"])({url:"/shop/goods/saveBaseInfo",method:"post",data:t})},save:function(t){return Object(s["default"])({url:"/shop/goods",method:"post",data:t})},remove:function(t){return Object(s["default"])({url:"/shop/goods",method:"delete",params:{id:t}})},get:function(t){return Object(s["default"])({url:"/shop/goods",method:"get",params:{id:t}})},changeIsOnSale:function(t,e){return Object(s["default"])({url:"/shop/goods/changeIsOnSale",method:"post",params:{id:t,isOnSale:e}})}}},4381:function(t,e,i){"use strict";i.r(e);var s=i("e799"),o=function(t){t.directive("permission",s["default"])};window.Vue&&(window["permission"]=s["default"],Vue.use(o)),s["default"].install=o,e["default"]=s["default"]},"51c7":function(t,e,i){"use strict";i.r(e);i("ac6a");var s=i("90b5"),o=i("274f"),n=i("5248"),a=i("fa7d"),r=i("4381");e["default"]={directives:{permission:r["default"]},data:function(){return{formVisible:!1,formTitle:"添加专题",isAdd:!0,form:{title:"",idArticle:"",idGoodsList:"",pv:"",id:""},listQuery:{page:1,limit:20,id:void 0,disabled:""},options:[{label:"是",value:1},{label:"否",value:0}],rangeDate:"",total:0,list:null,listLoading:!0,selRow:{},apiUrl:Object(a["getApiUrl"])(),showArticle:!1,article:{title:"",content:""},goodsList:[],selectedGoods:[],articleList:[],searchLoading:!1,showTopic:!1,topicUrl:"",topicDetail:""}},filters:{statusFilter:function(t){var e={published:"success",draft:"gray",deleted:"danger"};return e[t]}},computed:{rules:function(){return{}}},created:function(){this.init()},methods:{init:function(){this.fetchData()},fetchData:function(){var t=this;this.listLoading=!0;var e=this.listQuery;this.rangeDate&&(e["startDate"]=this.rangeDate[0],e["endDate"]=this.rangeDate[1]),s["default"].getList(this.listQuery).then((function(e){t.list=e.data.records,t.listLoading=!1,t.total=e.data.total}))},search:function(){this.fetchData()},reset:function(){this.listQuery.id="",this.listQuery.disabled="",this.rangeDate="",this.fetchData()},handleFilter:function(){this.listQuery.page=1,this.getList()},handleClose:function(){},fetchNext:function(){this.listQuery.page=this.listQuery.page+1,this.fetchData()},fetchPrev:function(){this.listQuery.page=this.listQuery.page-1,this.fetchData()},fetchPage:function(t){this.listQuery.page=t,this.fetchData()},changeSize:function(t){this.listQuery.limit=t,this.fetchData()},handleCurrentChange:function(t,e){this.selRow=t},resetForm:function(){this.form={title:"",idArticle:"",idGoodsList:"",pv:"",id:""}},add:function(){this.resetForm(),this.formTitle="添加专题",this.formVisible=!0,this.isAdd=!0},save:function(){var t=this;this.$refs["form"].validate((function(e){if(!e)return!1;s["default"].save({title:t.form.title,idArticle:t.form.idArticle,idGoodsList:t.form.idGoodsList.join(","),pv:t.form.pv,id:t.form.id}).then((function(e){t.$message({message:t.$t("common.optionSuccess"),type:"success"}),t.fetchData(),t.formVisible=!1}))}))},checkSel:function(){return!(!this.selRow||!this.selRow.id)||(this.$message({message:this.$t("common.mustSelectOne"),type:"warning"}),!1)},edit:function(){this.checkSel()&&(this.isAdd=!1,this.form=this.selRow,this.formTitle="编辑专题",this.formVisible=!0)},remove:function(){var t=this;if(this.checkSel()){var e=this.selRow.id;this.$confirm(this.$t("common.deleteConfirm"),this.$t("common.tooltip"),{confirmButtonText:this.$t("button.submit"),cancelButtonText:this.$t("button.cancel"),type:"warning"}).then((function(){s["default"].remove(e).then((function(e){t.$message({message:t.$t("common.optionSuccess"),type:"success"}),t.fetchData()})).catch((function(e){t.$notify.error({title:"错误",message:e})}))})).catch((function(){}))}},viewArticle:function(t){this.article=t,this.showArticle=!0},changeDisabled:function(t){var e=this;console.log("data",t),s["default"].changeDisabled(t.id,t.disabled).then((function(i){e.$message({message:t.disabled?"禁用成功":"启用成功",type:"success"})}))},searchGoods:function(t){var e=this;console.log("query",t),""!==t?(this.searchLoading=!0,o["default"].getList({page:1,limit:20,name:t}).then((function(t){var i=t.data.records;e.selectedGoods.length>0&&e.selectedGoods.forEach((function(t,e,s){var o=!1;i.forEach((function(e,i,s){e.id===t.id&&(o=!0)})),o||i.push(t)})),e.searchLoading=!1,e.goodsList=i}))):this.goodsList=[]},changeGoods:function(t){var e=this.goodsList,i=new Array;t.forEach((function(t,s,o){e.forEach((function(e,s,o){e.id===t&&i.push(e)}))})),this.selectedGoods=i,console.log("val",t)},searchArticle:function(t){var e=this;console.log("query",t),""!==t?(this.searchLoading=!0,n["default"].getList({page:1,limit:20,title:t}).then((function(t){e.articleList=t.data.records,console.log("articleList",e.articleList),e.searchLoading=!1}))):this.goodsList=[]},view:function(t){this.topicDetail='<iframe src="'.concat(this.apiUrl,"/promotion/topic/").concat(t,'" width="100%" height="667px" frameborder="0" scrolling="auto"></iframe>'),this.showTopic=!0}}}},5248:function(t,e,i){"use strict";i.r(e);var s=i("b775");e["default"]={getList:function(t){return Object(s["default"])({url:"/article/list",method:"get",params:t})},save:function(t){return Object(s["default"])({url:"/article",method:"post",data:t})},remove:function(t){return Object(s["default"])({url:"/article",method:"delete",params:{id:t}})},get:function(t){return Object(s["default"])({url:"/article",method:"get",params:{id:t}})}}},"90b5":function(t,e,i){"use strict";i.r(e);var s=i("b775");e["default"]={getList:function(t){return Object(s["default"])({url:"/promotion/topic/list",method:"get",params:t})},save:function(t){return Object(s["default"])({url:"/promotion/topic",method:"post",params:t})},remove:function(t){return Object(s["default"])({url:"/promotion/topic",method:"delete",params:{id:t}})},changeDisabled:function(t,e){return Object(s["default"])({url:"/promotion/topic/changeDisabled",method:"post",params:{id:t,disabled:e}})}}},e799:function(t,e,i){"use strict";i.r(e);i("6762"),i("2fdb");var s=i("4360");e["default"]={inserted:function(t,e,i){var o=e.value,n=s["default"].getters&&s["default"].getters.permissions;if(!(o&&o instanceof Array&&o.length>0))throw new Error("need roles! Like v-permission=\"['admin','editor']\"");var a=o,r=n.some((function(t){return a.includes(t)}));r||t.parentNode&&t.parentNode.removeChild(t)}}},fa7d:function(t,e,i){"use strict";i.r(e),i.d(e,"getApiUrl",(function(){return o}));var s="/api/admin/";function o(){return s}}}]);
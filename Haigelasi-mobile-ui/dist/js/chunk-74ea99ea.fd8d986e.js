(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74ea99ea"],{"14f3":function(e,t,a){"use strict";a.r(t);var r,n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"avatar"},[a("van-nav-bar",{attrs:{title:"修改头像","left-arrow":""},on:{"click-left":e.onClickLeft}}),e._v(" "),a("div",{staticClass:"preview"},[a("van-image",{attrs:{round:"",width:"100",height:"100",src:e.avatarUrl}})],1),e._v(" "),a("div",{staticClass:"upload"},[a("van-uploader",{attrs:{"after-read":e.afterRead}})],1)],1)},s=[],o=a("bd86"),c=(a("e930"),a("8f80")),i=(a("4056"),a("44bf")),u=(a("e7e5"),a("d399")),d=(a("be7f"),a("565f")),p=(a("5246"),a("6b41")),l=(a("0653"),a("34e9")),f=(a("c194"),a("7744")),m=(a("66b9"),a("b650")),g=a("c24f"),h=a("4360"),b="/api/mobile/",v={components:(r={},Object(o["a"])(r,m["a"].name,m["a"]),Object(o["a"])(r,f["a"].name,f["a"]),Object(o["a"])(r,l["a"].name,l["a"]),Object(o["a"])(r,p["a"].name,p["a"]),Object(o["a"])(r,d["a"].name,d["a"]),Object(o["a"])(r,u["a"].name,u["a"]),Object(o["a"])(r,i["a"].name,i["a"]),Object(o["a"])(r,c["a"].name,c["a"]),r),data:function(){return{avatarUrl:"/logo.jpg"}},mounted:function(){this.init()},methods:{init:function(){this.user=h["a"].state.app.user,this.user.avatar&&(this.avatarUrl=b+"/file/getImgStream?idFile="+this.user.avatar)},onClickLeft:function(){this.$router.go(-1)},afterRead:function(e){var t=this;console.log("上传成功",e),g["a"].upload({name:e.file.name,type:e.file.type,base64:e.content}).then((function(e){h["a"].dispatch("app/toggleUser",e.data),t.avatarUrl=b+"/file/getImgStream?idFile="+e.data.avatar}))}}},j=v,O=(a("f0d8"),a("2877")),w=Object(O["a"])(j,n,s,!1,null,null,null);t["default"]=w.exports},b775:function(e,t,a){"use strict";a("a481");var r=a("bc3a"),n=a.n(r),s=a("41cb"),o=a("4360"),c=a("5d2d"),i=n.a.create({baseURL:"http://139.129.117.238/api/mobile/",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},withCredentials:!1,timeout:15e3});i.interceptors.request.use((function(e){return c["a"].getToken()&&(e.headers["Authorization"]=c["a"].getToken()),e}),(function(e){return Promise.reject(e)})),i.interceptors.response.use((function(e){console.log("response",e),e.headers.token&&o["a"].dispatch("app/toggleToken",e.headers.token);var t=e.data;return console.log(t.code),1e4==t.code?e:2e4!=t.code?Promise.reject(t.msg||"error"):t}),(function(e){if(e.response)switch(e.response.status){case 401:return o["a"].dispatch("app/toggleUser",{}),o["a"].dispatch("app/toggleToken",""),s["a"].replace({path:"/login",query:{redirect:s["a"].currentRoute.path}}),Promise.reject(e.response.data.message);case 500:return e.response.data.message&&e.response.data.message.indexOf("relogin")>-1?(console.log("need relogin"),o["a"].dispatch("app/toggleUser",{}),o["a"].dispatch("app/toggleToken",""),s["a"].replace({path:"/login",query:{redirect:s["a"].currentRoute.path}}),Promise.reject(e.response.data.message)):Promise.reject(e.response.data.message);default:return Promise.reject(e.response.data.message)}})),t["a"]=i},c0d8:function(e,t,a){},c24f:function(e,t,a){"use strict";var r=a("b775");t["a"]={getUserInfo:function(){return Object(r["a"])({url:"/user/getInfo",method:"get"})},updateUserName:function(e){return Object(r["a"])({url:"/user/updateUserName/"+e,method:"post"})},updatePwd:function(e){return Object(r["a"])({url:"/account/updatePwd",method:"post",params:e})},updateGender:function(e){return Object(r["a"])({url:"/user/updateGender/"+e,method:"post"})},updatePassword:function(e,t,a){return Object(r["a"])({url:"/user/updatePassword/"+e+"/"+t+"/"+a,method:"post"})},upload:function(e){return console.log("file",e),Object(r["a"])({url:"/file/upload/base64",method:"post",data:e})},sendSmsCode:function(e){return Object(r["a"])({url:"/user/sendSmsCode",method:"post",params:{mobile:e}})}}},f0d8:function(e,t,a){"use strict";var r=a("c0d8"),n=a.n(r);n.a}}]);
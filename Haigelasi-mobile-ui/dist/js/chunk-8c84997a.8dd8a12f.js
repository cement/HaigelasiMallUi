(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8c84997a"],{"324c":function(e,t,a){},b30f:function(e,t,a){"use strict";var r=a("b775");t["a"]={save:function(e){return Object(r["a"])({url:"/user/order/save",method:"post",params:e})},get:function(e){return Object(r["a"])({url:"/user/order/"+e,method:"get"})},remove:function(e){return Object(r["a"])({url:"/user/order/cancel/"+e,method:"post"})},getOrders:function(e){return Object(r["a"])({url:"/user/order/getOrders",method:"get",params:e})},prepareCheckout:function(e){return Object(r["a"])({url:"/user/order/prepareCheckout",params:e,method:"get"})},confirm:function(e){return Object(r["a"])({url:"/user/order/confirm/"+e,method:"post"})}}},b775:function(e,t,a){"use strict";a("a481");var r=a("bc3a"),o=a.n(r),c=a("41cb"),s=a("4360"),n=a("5d2d"),i=o.a.create({baseURL:"http://139.129.117.238/api/mobile/",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},withCredentials:!1,timeout:15e3});i.interceptors.request.use((function(e){return n["a"].getToken()&&(e.headers["Authorization"]=n["a"].getToken()),e}),(function(e){return Promise.reject(e)})),i.interceptors.response.use((function(e){console.log("response",e),e.headers.token&&s["a"].dispatch("app/toggleToken",e.headers.token);var t=e.data;return console.log(t.code),1e4==t.code?e:2e4!=t.code?Promise.reject(t.msg||"error"):t}),(function(e){if(e.response)switch(e.response.status){case 401:return s["a"].dispatch("app/toggleUser",{}),s["a"].dispatch("app/toggleToken",""),c["a"].replace({path:"/login",query:{redirect:c["a"].currentRoute.path}}),Promise.reject(e.response.data.message);case 500:return e.response.data.message&&e.response.data.message.indexOf("relogin")>-1?(console.log("need relogin"),s["a"].dispatch("app/toggleUser",{}),s["a"].dispatch("app/toggleToken",""),c["a"].replace({path:"/login",query:{redirect:c["a"].currentRoute.path}}),Promise.reject(e.response.data.message)):Promise.reject(e.response.data.message);default:return Promise.reject(e.response.data.message)}})),t["a"]=i},f0c8:function(e,t,a){"use strict";var r=a("324c"),o=a.n(r);o.a},f571:function(e,t,a){"use strict";a.r(t);var r,o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("van-cell-group",[a("van-cell",{attrs:{title:e.addrText,"is-link":"",to:"address"}})],1),e._v(" "),e._l(e.cartList,(function(t){return a("div",{key:t.id,staticClass:"card-goods__item"},[a("van-card",{staticStyle:{"margin-left":"15px"},attrs:{title:t.title,desc:t.goods.descript,num:t.count,price:e.formatPrice(t.price),thumb:t.thumb}})],1)})),e._v(" "),a("van-submit-bar",{attrs:{price:e.totalPrice,disabled:!e.checkedGoods.length,"button-text":e.submitBarText},on:{submit:e.submit}}),e._v(" "),a("van-tabbar",{model:{value:e.activeFooter,callback:function(t){e.activeFooter=t},expression:"activeFooter"}},[a("van-tabbar-item",{attrs:{icon:"home-o",replace:"",to:"/index"}},[e._v("首页")]),e._v(" "),a("van-tabbar-item",{attrs:{icon:"search",replace:"",to:"/search"}},[e._v("发现")]),e._v(" "),a("van-tabbar-item",{attrs:{icon:"cart-o",replace:"",to:"/cart"}},[e._v("购物车")]),e._v(" "),a("van-tabbar-item",{attrs:{icon:"user-o",replace:"",to:"/user"}},[e._v("我的")])],1)],2)},c=[],s=(a("e7e5"),a("d399")),n=a("bd86"),i=(a("0653"),a("34e9")),d=(a("c194"),a("7744")),u=(a("a52c"),a("2ed4")),l=(a("537a"),a("ac28")),h=(a("5246"),a("6b41")),p=(a("a909"),a("3acc")),m=(a("be39"),a("efa0")),b=(a("3c32"),a("417e")),f=(a("9cb7"),a("66fd")),g=a("b30f"),v=a("5d2d"),k="/api/mobile/",j={components:(r={},Object(n["a"])(r,f["a"].name,f["a"]),Object(n["a"])(r,b["a"].name,b["a"]),Object(n["a"])(r,m["a"].name,m["a"]),Object(n["a"])(r,p["a"].name,p["a"]),Object(n["a"])(r,h["a"].name,h["a"]),Object(n["a"])(r,l["a"].name,l["a"]),Object(n["a"])(r,u["a"].name,u["a"]),Object(n["a"])(r,d["a"].name,d["a"]),Object(n["a"])(r,i["a"].name,i["a"]),r),data:function(){return{activeFooter:2,checkedGoods:[],checkeAllCarts:[],cartList:[],checkedAll:!0,addr:void 0,message:""}},mounted:function(){this.init()},computed:{addrText:function(){return this.addr?this.addr.name+"("+this.addr.tel+")":""},submitBarText:function(){var e=this.checkedGoods.length;return"提交订单"+(e?"(".concat(e,")"):"")},totalPrice:function(){var e=this;return this.cartList.reduce((function(t,a){return t+(-1!==e.checkedGoods.indexOf(a.id)?parseFloat(a.goods.price)*a.count:0)}),0)}},methods:{init:function(){var e=this,t=v["a"].get("chosenAddressId");g["a"].prepareCheckout({chosenAddressId:t}).then((function(t){var a=t.data.list;for(var r in e.addr=t.data.addr,a)a[r].thumb=k+"/file/getImgStream?idFile="+a[r].goods.pic,e.checkedGoods.push(a[r].id+"");e.cartList=a})).catch((function(e){Object(s["a"])(e)}))},submit:function(){var e=this;g["a"].save({idAddress:this.addr.id,message:this.message}).then((function(t){var a=t.data;e.$router.push({path:"payment",query:{orderNo:a.orderSn,totalPrice:a.totalPrice}})}))},formatPrice:function(e){return(e/100).toFixed(2)},stepperEvent:function(e,t){var a=t[0];cart.update({id:e.id,count:a})},checkAll:function(){this.checkedGoods.length===this.cartList.length?(this.checkeAllCarts=this.checkedGoods,this.checkedGoods=[]):this.checkedGoods=this.checkeAllCarts},chooseAddress:function(){}}},O=j,_=(a("f0c8"),a("2877")),x=Object(_["a"])(O,o,c,!1,null,null,null);t["default"]=x.exports}}]);
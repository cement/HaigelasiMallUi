(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dba69bae"],{"75db":function(e,t,a){"use strict";var o=a("eaeb"),r=a.n(o);r.a},"7ded":function(e,t,a){"use strict";var o=a("b775");t["a"]={loginOrReg:function(e,t){return Object(o["a"])({url:"/loginOrReg",method:"post",params:{mobile:e,smsCode:t}})},loginByPassword:function(e,t){return Object(o["a"])({url:"/loginByPass",method:"post",params:{mobile:e,password:t}})},wxLogin:function(){return Object(o["a"])({url:"/wxLogin/login",method:"get"})},sendSmsCode:function(e){return Object(o["a"])({url:"/sendSmsCode",method:"post",params:{mobile:e}})},logout:function(){return Object(o["a"])({url:"/logout",method:"post"})}}},b6ff:function(e,t,a){"use strict";a.r(t);var o,r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"updateUserName"},[a("van-nav-bar",{attrs:{title:"修改密码","left-arrow":""},on:{"click-left":e.onClickLeft}}),e._v(" "),a("van-cell-group",[a("van-field",{attrs:{required:"",clearable:"",label:"旧密码",placeholder:"请输入"},model:{value:e.oldPwd,callback:function(t){e.oldPwd=t},expression:"oldPwd"}}),e._v(" "),a("van-field",{attrs:{required:"",clearable:"",label:"新密码",placeholder:"请输入"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),a("van-field",{attrs:{required:"",clearable:"",label:"确认密码",placeholder:"请输入"},model:{value:e.rePassword,callback:function(t){e.rePassword=t},expression:"rePassword"}})],1),e._v(" "),a("van-button",{attrs:{type:"primary",round:"",block:""},on:{click:e.submit}},[e._v("确定")])],1)},s=[],n=a("bd86"),c=(a("e7e5"),a("d399")),u=(a("be7f"),a("565f")),i=(a("5246"),a("6b41")),d=(a("0653"),a("34e9")),l=(a("c194"),a("7744")),p=(a("66b9"),a("b650")),b=a("c24f"),m=a("7ded"),f=a("4360"),h={components:(o={},Object(n["a"])(o,p["a"].name,p["a"]),Object(n["a"])(o,l["a"].name,l["a"]),Object(n["a"])(o,d["a"].name,d["a"]),Object(n["a"])(o,i["a"].name,i["a"]),Object(n["a"])(o,u["a"].name,u["a"]),Object(n["a"])(o,c["a"].name,c["a"]),o),data:function(){return{oldPwd:"",password:"",rePassword:""}},mounted:function(){this.init()},methods:{init:function(){this.userName=f["a"].state.app.user.nickName},onClickLeft:function(){this.$router.go(-1)},submit:function(){var e=this;this.oldPwd&&""!==!this.password&&this.rePassword?this.password===this.rePassword?b["a"].updatePassword(this.oldPwd,this.password,this.rePassword).then((function(t){m["a"].logout().then((function(t){f["a"].dispatch("app/toggleUser",{}),f["a"].dispatch("app/toggleToken",""),e.$router.push({path:"/login"})})).catch((function(e){}))})).catch((function(e){console.log("err",e),Object(c["a"])(e)})):Object(c["a"])("新密码前后不一致"):Object(c["a"])("请输入必填项")}}},g=h,w=(a("75db"),a("2877")),j=Object(w["a"])(g,r,s,!1,null,null,null);t["default"]=j.exports},b775:function(e,t,a){"use strict";a("a481");var o=a("bc3a"),r=a.n(o),s=a("41cb"),n=a("4360"),c=a("5d2d"),u=r.a.create({baseURL:"http://139.129.117.238/api/mobile/",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},withCredentials:!1,timeout:15e3});u.interceptors.request.use((function(e){return c["a"].getToken()&&(e.headers["Authorization"]=c["a"].getToken()),e}),(function(e){return Promise.reject(e)})),u.interceptors.response.use((function(e){console.log("response",e),e.headers.token&&n["a"].dispatch("app/toggleToken",e.headers.token);var t=e.data;return console.log(t.code),1e4==t.code?e:2e4!=t.code?Promise.reject(t.msg||"error"):t}),(function(e){if(e.response)switch(e.response.status){case 401:return n["a"].dispatch("app/toggleUser",{}),n["a"].dispatch("app/toggleToken",""),s["a"].replace({path:"/login",query:{redirect:s["a"].currentRoute.path}}),Promise.reject(e.response.data.message);case 500:return e.response.data.message&&e.response.data.message.indexOf("relogin")>-1?(console.log("need relogin"),n["a"].dispatch("app/toggleUser",{}),n["a"].dispatch("app/toggleToken",""),s["a"].replace({path:"/login",query:{redirect:s["a"].currentRoute.path}}),Promise.reject(e.response.data.message)):Promise.reject(e.response.data.message);default:return Promise.reject(e.response.data.message)}})),t["a"]=u},c24f:function(e,t,a){"use strict";var o=a("b775");t["a"]={getUserInfo:function(){return Object(o["a"])({url:"/user/getInfo",method:"get"})},updateUserName:function(e){return Object(o["a"])({url:"/user/updateUserName/"+e,method:"post"})},updatePwd:function(e){return Object(o["a"])({url:"/account/updatePwd",method:"post",params:e})},updateGender:function(e){return Object(o["a"])({url:"/user/updateGender/"+e,method:"post"})},updatePassword:function(e,t,a){return Object(o["a"])({url:"/user/updatePassword/"+e+"/"+t+"/"+a,method:"post"})},upload:function(e){return console.log("file",e),Object(o["a"])({url:"/file/upload/base64",method:"post",data:e})},sendSmsCode:function(e){return Object(o["a"])({url:"/user/sendSmsCode",method:"post",params:{mobile:e}})}}},eaeb:function(e,t,a){}}]);